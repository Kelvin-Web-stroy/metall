<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ГераМеталл — цветной металлопрокат</title>
  <meta name="description" content="Цветной металлопрокат: алюминий, медь, латунь, бронза. Склад, доставка, резка. Каталог по прайсу."/>
  <link rel="stylesheet" href="assets/site.css"/>
  <link rel="stylesheet" href="assets/index.css"/>
</head>
<body>

  <div class="topline">
    <div class="container">
      <div class="row">
        <div class="left">
          <span>Цветной металлопрокат</span>
          <span>•</span>
          <span>Склад • Резка • Доставка</span>
        </div>
        <div class="right">
          <a href="#about">Компания</a>
          <span>•</span>
          <a href="#contacts">Контакты</a>
        </div>
      </div>
    </div>
  </div>

  <header>
    <div class="container">
      <div class="head">
        <a class="brand" href="index.html" aria-label="На главную">
          <span class="logo" aria-hidden="true">
            <!-- если есть логотип: assets/logo.png — раскомментируй -->
            <!-- <img src="assets/logo.png" alt="ГераМеталл"> -->
          </span>
          <span class="name">ГераМеталл<span class="tag">цветной металлопрокат</span></span>
        </a>

        <a class="catalog-btn" href="catalog.html" title="Каталог">
          <span class="burger"><i></i></span>
          Каталог
        </a>

        <form class="search" action="catalog.html" method="GET" onsubmit="return goSearch(event)">
          <input id="topSearch" placeholder="Название, марка, размер (например: Л63 Ø20, М1, АД31…)" />
          <button type="submit">Найти</button>
        </form>

        <div class="head-right">
          <div class="mini-links">
            <a href="catalog.html">Цены</a>
            <span>·</span>
            <a href="#services">Услуги</a>
          </div>
          <a class="phone" href="tel:+79000000000">+7 (900) 000-00-00</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-grid">

        <div class="card left-card">
          <h1><span style="background:var(--accent); -webkit-background-clip:text; background-clip:text; color:transparent">Цветной</span> металлопрокат в наличии</h1>
          <p class="lead">Быстрый подбор по марке/размеру. Резка в размер и доставка на объект. Опт/розница.</p>

          <div class="form">
            <div class="row">
              <input id="q1" placeholder="Материал / марка (например: Л63, М1, АД31)" />
              <input id="q2" placeholder="Размер (например: Ø20, 2×1000×2000)" />
            </div>
            <input id="q3" placeholder="Форма (лист/пруток/труба/шина) или запрос текстом" />
            <div class="btns">
              <a class="btn primary" href="catalog.html" onclick="return toCatalogWithQuery()">Найти в каталоге</a>
              <a class="btn" href="#popular">Популярные категории</a>
            </div>
            <div class="hint">Категории на главной и позиции в каталоге подтягиваются из прайса.</div>
          </div>
        </div>

        <div class="banner" role="img" aria-label="Баннер (замени assets/hero.jpg)">
          <div class="content">
            <div>
              <h3 class="title">Поставка цветмета под производство</h3>
              <p class="sub">Алюминий • Медь • Латунь • Бронза. Отгрузка со склада и под заказ. Документы для юрлиц.</p>
            </div>
            <div class="bottom">
              <button class="more" onclick="location.href='catalog.html'">Подробнее</button>
              <div class="nav-arrows" aria-hidden="true">
                <button class="circle" type="button">←</button>
                <button class="circle" type="button">→</button>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="features" id="services">
        <div class="card feat">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 7h16M4 12h16M4 17h10"/>
            </svg>
          </div>
          <div>
            <b>Документы и качество</b>
            <p>Работа по спецификации: марка, размер, партия. Счёт/договор/закрывающие.</p>
          </div>
        </div>

        <div class="card feat">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 17l2 2 4-4"/>
              <path d="M3 7h18M7 7v10"/>
              <path d="M12 17h9"/>
            </svg>
          </div>
          <div>
            <b>Резка в размер</b>
            <p>Подготовим металл к производству/монтажу: резка, комплектация, маркировка.</p>
          </div>
        </div>

        <div class="card feat">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 16V6a2 2 0 0 1 2-2h11l5 5v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
              <path d="M7 20a2 2 0 1 0 4 0"/>
              <path d="M15 20a2 2 0 1 0 4 0"/>
            </svg>
          </div>
          <div>
            <b>Доставка</b>
            <p>По городу и области. Рассчитаем логистику по весу/габариту и адресу.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="popular">
      <div class="section-head">
        <h2>Популярные категории</h2>
      </div>
      <div class="cats" id="cats"></div>
    </section>

    <section class="section" id="about">
      <div class="section-head">
        <h2 style="font-size:34px;margin-top:10px">О компании</h2>
      </div>
      <div class="card" style="padding:16px">
        <div class="small" style="color:var(--muted)">
          ГераМеталл — поставщик металлопроката. Каталог на сайте сформирован из прайса: группы (заголовки) и все позиции внутри.
          Под ваш бизнес можно добавить: WhatsApp/Telegram, форму заявки, загрузку нового прайса, SEO-страницы.
        </div>
      </div>
    </section>

    <section class="section" id="contacts">
      <div class="section-head">
        <h2 style="font-size:34px;margin-top:10px">Контакты</h2>
      </div>
      <div class="features" style="margin-top:14px">
        <div class="card feat"><div><b>Телефон</b><p><a href="tel:+79000000000">+7 (900) 000-00-00</a></p></div></div>
        <div class="card feat"><div><b>Почта</b><p><a href="mailto:sales@gerametal.ru">sales@gerametal.ru</a></p></div></div>
        <div class="card feat"><div><b>Адрес</b><p>Ваш город, ул. Примерная, 10</p></div></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container foot">
      <div>
        <b>ГераМеталл</b><br/>
        <div class="small">Цветной металлопрокат • склад • доставка • резка • комплектация.</div>
        <div class="small">© <span id="y"></span></div>
      </div>
      <div>
        <b>Быстрые ссылки</b><br/>
        <a href="catalog.html">Каталог</a> · <a href="#popular">Популярные категории</a> · <a href="#contacts">Контакты</a>
        <div class="small" style="margin-top:10px">Категории на главной подтягиваются из <b>products.json</b>.</div>
      </div>
    </div>
  </footer>

  <a class="mobile-call" href="tel:+79000000000">Позвонить</a>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    function goSearch(e){
      e.preventDefault();
      const q = (document.getElementById('topSearch').value || '').trim();
      location.href = 'catalog.html' + (q ? ('#search=' + encodeURIComponent(q)) : '');
      return false;
    }

    function toCatalogWithQuery(){
      const q = [q1.value, q2.value, q3.value].filter(Boolean).join(' ').trim();
      location.href = 'catalog.html' + (q ? ('#search=' + encodeURIComponent(q)) : '');
      return false;
    }

    async function renderPopular(){
      try{
        const res = await fetch('products.json', {cache:'no-store'});
        const products = await res.json();

        const map = new Map();
        for(const p of products){
          const cat = (p.category || 'Каталог').toString().trim();
          if(!map.has(cat)) map.set(cat, []);
          map.get(cat).push(p);
        }

        const sorted = [...map.entries()].sort((a,b) => b[1].length - a[1].length).slice(0,4);

        const catsEl = document.getElementById('cats');
        catsEl.innerHTML = sorted.map(([cat, list], idx) => {
          const seen = new Set();
          const lines = [];
          for(const it of list){
            const t = (it.profile || it.size || '').toString().trim();
            if(!t) continue;
            if(seen.has(t)) continue;
            seen.add(t);
            lines.push(t);
            if(lines.length >= 7) break;
          }
          const imgText = ['Al','Cu','Br','Zn'][idx] || 'ME';
          return `
            <div class="card cat">
              <div class="top">
                <h3 class="name">${escapeHtml(shorten(cat, 26))}</h3>
                <div class="img"><span>${imgText}<br/>METAL</span></div>
              </div>
              <ul>
                ${lines.map(t => `
                  <li>
                    <a href="catalog.html#search=${encodeURIComponent(t)}">
                      <span>${escapeHtml(t)}</span>
                      <span class="arrow">›</span>
                    </a>
                  </li>
                `).join('')}
              </ul>
            </div>
          `;
        }).join('');

      }catch(err){
        console.log(err);
      }
    }

    function shorten(s, n){ s = (s || '').toString(); return s.length > n ? s.slice(0, n-1) + '…' : s; }
    function escapeHtml(str){
      return (str || '').toString()
        .replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')
        .replaceAll('"','&quot;').replaceAll("'","&#039;");
    }

    renderPopular();
  </script>
  <nav class="bottom-nav" aria-label="Нижнее меню">
    <div class="grid">
      <a href="index.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 10.5 12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z"/>
        </svg>
        Главная
      </a>
      <a href="catalog.html">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 6h16M4 12h16M4 18h10"/>
        </svg>
        Каталог
      </a>
      <a href="cart.html" style="position:relative">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 6h15l-1.5 9h-12z"/><path d="M6 6 5 3H2"/>
          <path d="M9 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
          <path d="M18 22a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
        </svg>
        Корзина
        <span class="cart-badge" data-cart-badge style="display:none">0</span>
      </a>
      <a href="tel:+79000000000">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M22 16.9v3a2 2 0 0 1-2.2 2 19.8 19.8 0 0 1-8.6-3.1 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.1 4.2 2 2 0 0 1 4.1 2h3a2 2 0 0 1 2 1.7c.1.9.3 1.8.6 2.6a2 2 0 0 1-.5 2.1L8 10a16 16 0 0 0 6 6l1.6-1.2a2 2 0 0 1 2.1-.5c.8.3 1.7.5 2.6.6A2 2 0 0 1 22 16.9z"/>
        </svg>
        Звонок
      </a>
    </div>
  </nav>
  <script src="assets/app.js"></script>
</body>
</html>
